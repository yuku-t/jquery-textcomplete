/*! jquery-textcomplete - v0.0.1 - 2013-09-07 */!function(a){"use strict";var b=function(a){var b,d;return b=function(){d=!1},function(){var e;d||(d=!0,e=c(arguments),e.unshift(b),a.apply(this,e))}},c=function(a){var b;return b=Array.prototype.slice.call(a)},d=function(a,b){return a.bind?a.bind(b):function(){a.apply(b,arguments)}},e=function(a){return a},f=function(){function c(b,c){var h,i;h=a(e.wrapper).css(f.wrapper),i=a(e.list).css(f.list),this.el=b,this.$el=a(b),this.$el.wrap(h).before(i),this.listView=new g(i,this),this.strategies=c,this.$el.on("keyup",d(this.onKeyup,this)),this.$el.on("keydown",d(this.listView.onKeydown,this.listView)),a(document).on("click",d(function(a){a.originalEvent.internal||this.listView.deactivate()},this))}var e,f;return e={wrapper:'<div class="textcomplete-wrapper"></div>',list:'<ul class="dropdown-menu"></ul>'},f={wrapper:{position:"relative",display:"inline-block"},list:{position:"absolute",top:0,left:0,zIndex:"100",display:"none"}},a.extend(c.prototype,{renderList:function(a){this.listView.shown||this.listView.setPosition(this.getCaretPosition()),a=a.slice(0,this.strategy.maxCount),this.listView.render(this.strategy,a)},searchCallbackFactory:function(a){var b=this;return function(c){b.renderList(c),a()}},onKeyup:function(){var a,b;if(a=this.extractSearchQuery(this.getTextFromHeadToCaret()),a.length){if(b=a[1],this.term===b)return;this.term=b,this.search(a)}else this.term=null,this.listView.deactivate()},onSelect:function(a){var b,c;b=this.getTextFromHeadToCaret(),c=this.el.value.substring(this.el.selectionEnd),b=b.replace(this.strategy.match,this.strategy.replace(a)),this.el.value=b+c,this.el.focus(),this.el.selectionStart=this.el.selectionEnd=b.length},getCaretPosition:function(){if(0!==this.el.selectionEnd){var b,c,d,e,f,g,h;for(b={position:"absolute",overflow:"auto","white-space":"pre-wrap",top:0,left:-9999},c=["border-bottom-width","border-left-width","border-right-width","border-top-width","font-family","font-size","font-style","font-variant","font-weight","height","letter-spacing","word-spacing","line-height","padding-bottom","padding-left","padding-right","padding-top","text-decoration","width"],d=0,e=c.length;e>d;d++)b[c[d]]=this.$el.css(c[d]);return f=a("<div></div>").css(b).text(this.getTextFromHeadToCaret()),g=a("<span></span>").text("&nbsp;").appendTo(f),this.$el.before(f),h=g.position(),h.top+=g.height()-this.$el.scrollTop(),f.remove(),h}},getTextFromHeadToCaret:function(){var a,b,c;return b=this.el.selectionEnd,"number"==typeof b?a=this.el.value.substring(0,b):document.selection&&(c=this.el.createTextRange(),c.moveStart("character",0),c.moveEnd("textedit"),a=c.text),a},extractSearchQuery:function(a){var b,c,d;for(b in this.strategies)if(this.strategies.hasOwnProperty(b)&&(c=this.strategies[b],d=a.match(c.match)))return[c,d[c.index]];return[]},search:b(function(a,b){var c;this.strategy=b[0],c=b[1],this.strategy.search(c,this.searchCallbackFactory(a))})}),c}(),g=function(){function b(a,b){this.$el=a,this.index=0,this.completer=b,this.$el.on("click","a",d(this.onClick,this))}return a.extend(b.prototype,{shown:!1,render:function(a,b){var c,d,e,f;if(this.data=b,e=b.length){for(c="",d=0;e>d;d++)f=b[d],c+='<li><a data-value="'+f+'">',c+=a.template(f),c+="</a></li>";this.$el.html(c),this.index=0,this.activate()}else this.deactivate()},activateIndexedItem:function(){this.$el.find(".active").removeClass("active"),this.getActiveItem().addClass("active")},getActiveItem:function(){return a(this.$el.children().get(this.index))},activate:function(){this.shown||(this.$el.show(),this.shown=!0),this.activateIndexedItem()},deactivate:function(){this.shown&&(this.$el.hide(),this.shown=!1,this.data=this.index=null)},setPosition:function(a){this.$el.css(a)},select:function(a){this.completer.onSelect(a),this.deactivate()},onKeydown:function(a){this.shown&&(38===a.keyCode?0===this.index?this.deactivate():(a.preventDefault(),this.index-=1,this.activateIndexedItem()):40===a.keyCode?this.index===this.data.length-1?this.deactivate():(a.preventDefault(),this.index+=1,this.activateIndexedItem()):(13===a.keyCode||9===a.keyCode)&&(a.preventDefault(),this.select(this.getActiveItem().children().data("value"))))},onClick:function(b){b.originalEvent.internal=!0,this.select(a(b.target).data("value"))}}),b}();a.fn.textcomplete=function(a){var b,c;for(b in a)a.hasOwnProperty(b)&&(c=a[b],c.template||(c.template=e),null==c.index&&(c.index=2),c.maxCount||(c.maxCount=10));return this.each(function(){new f(this,a)}),this}}(window.jQuery);
//# sourceMappingURL=jquery.textcomplete.min.map